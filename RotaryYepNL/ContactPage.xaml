<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             xmlns:views="clr-namespace:RotaryYepNL.Views"
             xmlns:controls="clr-namespace:Plugin.Maui.SegmentedControl;assembly=Plugin.Maui.SegmentedControl"
             x:Class="RotaryYepNL.ContactPage"
             Title="Contact">


    <!-- Body -->
    <Grid Grid.Row="1">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Segmented tabs (items are supplied in code-behind from _sections) -->
        <Grid Padding="0,8"
              Grid.Row="0">
            <controls:SegmentedControl x:Name="Segmented"
                                       HorizontalOptions="Fill"
                                       Margin="0,4"
                                       SelectedSegment="{Binding SelectedIndex, Mode=TwoWay}">
                <!-- Options are added dynamically in code-behind -->
            </controls:SegmentedControl>
        </Grid>

        <!-- Content area -->
        <Grid Grid.Row="1">
            <CollectionView x:Name="ContactsCollection"
                            SelectionMode="Single"
                            SelectionChanged="ContactsCollection_SelectionChanged"
                            Margin="0">
                <CollectionView.ItemsLayout>
                    <LinearItemsLayout Orientation="Vertical"/>
                </CollectionView.ItemsLayout>
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <views:ContactCard/>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <StackLayout x:Name="EmptyState"
                         IsVisible="False"
                         VerticalOptions="Center"
                         HorizontalOptions="Center"
                         Padding="24">
                <Label Text="No contacts available"
                       FontAttributes="Bold"
                       FontSize="18"
                       HorizontalOptions="Center"/>
                <Label Text="There are no contacts in this section at the moment."
                       HorizontalOptions="Center"
                       Opacity="0.8"/>
            </StackLayout>
        </Grid>
    </Grid>

</ContentPage>
